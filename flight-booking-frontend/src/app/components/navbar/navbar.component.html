<nav class="navbar">
  <div class="navbar-left">
    <!-- Brand -->
    <button
      *ngIf="(currentUser$ | async) as user; else publicBrand"
      [routerLink]="user.role === 'ADMIN' ? '/admin' : '/search'"
      class="brand-btn">
      Flight Booking
    </button>

    <ng-template #publicBrand>
      <button routerLink="/" class="brand-btn">
        Flight Booking
      </button>
    </ng-template>
  </div>

  <div class="navbar-right">
    <!-- Logged-in state -->
    <div *ngIf="(currentUser$ | async) as user; else guestActions" class="user-area">
      <div class="user-text">
        <span class="user-name">Welcome, {{ user.firstName }} {{ user.lastName }}</span>
        <span class="user-role">
          {{ user.role === 'ADMIN' ? 'Admin' : 'Passenger' }}
        </span>
      </div>

      <!-- Actions -->
      <div class="nav-actions">
        <button routerLink="/profile" class="btn pill btn-profile">
          Profile
        </button>

        <!-- Admin-only -->
        <ng-container *ngIf="user.role === 'ADMIN'; else passengerMenu">
          <button routerLink="/airlines" class="btn pill">
            Manage Airlines
          </button>
          <button routerLink="/inventory" class="btn pill">
            Add Flight
          </button>
        </ng-container>

        <!-- Passenger-only -->
        <ng-template #passengerMenu>
          <button routerLink="/search" class="btn pill">
            Search Flights
          </button>
          <button routerLink="/tickets" class="btn pill">
            My Bookings
          </button>
        </ng-template>

        <button (click)="logout()" class="btn pill btn-logout">
          Logout
        </button>
      </div>
    </div>

    <!-- Logged-out state -->
    <ng-template #guestActions>
      <div class="guest-area">
        <button routerLink="/login" class="btn pill btn-login">
          Login / Register
        </button>
      </div>
    </ng-template>
  </div>
</nav>
